\documentclass[NumTh.tex]{subfiles}
\begin{document}

\subsection{Basic notions}

Let $R$ be a commutative ring with $1$,
and denote by $R^\ast$ the subset of its units.
An element $x \in R$ is called \emph{irreducible} if
\begin{itemize}
  \item $x \neq 0$, $x \nin R^\ast$ and
  \item $x = a \cdot b$ with $a,b \in R \implies a \in R^\ast$ or $b \in R^\ast$
\end{itemize}
An element $\pi \in R$ is called \emph{prime} if
\begin{itemize}
  \item $\pi \nin R^\ast$, $\pi \neq 0$ and
  \item $\pi \divides x \cdot y$ with $x,y \in R \implies \pi \divides x$ or $\pi \divides y$
\end{itemize}
Two elements $x,y \in R$ are called \emph{associate} if $\exists u \in R^\ast$ such that $y = ux$.
\\

A ring $R$ is called a unique factorisation domain (UFD) if
\begin{enumerate}
  \item $R$ is an integral domain
  \item Every non-zero non-unit $x \in R$ can be written as a product $x = q_1 \cdots q_r$ with finitely many irreducible elements $q_1,\dots,q_r \in R$.
  \item This decomposition is unique up to unites and the order of the factors.
\end{enumerate}

\begin{ex}
  \begin{itemize}
    \item $R = \Z$, $R^\ast = \{\pm 1\}$. \\
    $\pi$ is prime if and only if $\pi$ is irreducible. \\
    And $R$ is a UFD.
    \item $R = \Z[\sqrt{-5}]$. \\
    If $x = a + b \sqrt{-5} \neq 0$ in $R$ then $x^{-1} = \frac{a -b \sqrt{-5}}{a^2 + 5 b^2}$.
    So 
    \[ x^{-1} \in R \implies a^2 + 5b^2 \divides a \text{.} \]
    Thus $R^\times = \{ \pm 1\}$.\\
    Consider the norm map $N: R \to \Z$ defined by
    \[ N(a+b\sqrt{-5}) = a^2 + 5 b^2 \text{.} \]
    Then $N(x \cdot y) = N(x) \cdot N(y)$ for all $x,y \in \Z[\sqrt{-5}]$ and $N(x) = 1 \iff x \in R^\ast$.
    Consider the decompositions
    \begin{align}
      6 = 2 \cdot 3 = (1 + \sqrt{-5}) (1 - \sqrt{-5}) \label{star}
    \end{align}
    All factors are irreducible. \\
    Why?
    If $xy = 2 \implies 4 = N(2) = N(x) N(y)$.
    Now $N(x) = 2$ is impossible. Hence, $N(x) = 1$ or $N(y) = 1$.
    So either $x \in R^\ast$ or $y \in R^\ast$. \\
    The same argument applies for the other factors.\\
    Clearly none of these are associate so (\ref{star}) are two essentially different decompositions in irreducable factors.
    So $R$ is not a UFD. None of the factors in (\ref{star}) is prime.\\
    Indeed, e.g., $2 \divides (1 + \sqrt{-5})(1- \sqrt{-5})$.
    But $2 \nmid 1 + \sqrt{-5}$ and $2 \nmid 1- \sqrt{-5}$ otherwise
    \[ 4 = N(2) \divides N(1 \pm \sqrt{-5}) = 6 \lightning\]
  \end{itemize}
\end{ex}

Recall that an ideal $I$ of $R$ is an additive subgroup of $R$ that satisfies
\[ r \in R \text{ and } x \in I \implies r \cdot x \in I \]
An ideal $\mathfrak{p}$ of $R$ is called a \emph{prime ideal} if $a,b \in R$ and $a \cdot b \in \mathfrak{p} \implies a \in \mathfrak{p}$ or $b \in \mathfrak{p}$.
An ideal $I$ of $R$ is called \emph{maximal} if the only ideals of $R$ containing $I$ are $R$ and $I$ itself.
If $I,J$ are ideals of $R$ then we define
\begin{itemize}
  \item $I + J = \{ x+y : x \in I, y \in J \}$
  \item $I \cdot J = \{ \sum_{i=1}^n x_i y_i : n \in \N, x_i \in I, y_i \in J (1 \leq i \leq n) \}$
\end{itemize}
These are both ideals of $R$.

An ideal $I$ of $R$ is called \emph{principal} if there exists an $x \in R$ such that
\[ I = \{ r \cdot x : r \in R \} = \left\langle x \right\rangle \text{.} \]
A ring in which every ideal is principle is called a \emph{principal ideal domain} (PID).

A ring is called \emph{Euclidean} if there exists a map $\phi: R \to \Z$ such that
\begin{itemize}
  \item $\phi(x) \geq 0$
  \item $\phi(0) = 0$
  \item $\forall x,y \in R$, $y \neq 0$ there exist $r,q \in R$ such that $ x = q\cdot y + r$ and either $r = 0$ or $\phi(r) < \phi(y)$.
\end{itemize}

\begin{ex}
  \begin{itemize}
    \item $R = \Z$, $\phi(x) = \abs{x}$
    \item $R = K[t]$, where $K$ is a field. \\
    $\phi(x) = \deg_t(x)$ if $x \neq 0$ and $\phi(0) = 0$.
  \end{itemize}
\end{ex}

\begin{theorem}\label{th_3_2_1}
  Every Euclidean ring is a PID.
\end{theorem}

\begin{proof}
  Let $I$ be an ideal of $R$.
  If $I = (0)$ then we are done.\\
  Suppose $I \neq \left\langle 0 \right\rangle$.
  Then let $y \in I$ be non-zero with $\phi(y)$ minimal.
  Then $I = \left\langle y \right\rangle$. \\
  Why?
  Suppose $x \in I$.
  Then there exist $q,r\in R$ such that $x = q \cdot y + r$.
  As $I$ is an ideal we have $q \cdot y \in I$ and thus $r = x-qy \in I$.
  By the minimality of $y$ we have $r = 0$.
  This shows that $x \in \left\langle y \right\rangle$.
\end{proof}

So in particular, $\Z$ and $K[t]$ are PIDs.

\begin{cor}\label{cor_3_2_2}
  The rings $\Z[\sqrt{-1}]$ and $\Z[\sqrt{-2}]$ are Euclidean and thus PIDs.
\end{cor}

\begin{proof}
  Identify $\C$ with $\R^2$ then $\Z[\sqrt{-2}]$ can be seen as a lattice in $\R^2$ with fundamental cells $[0,1)
  \begin{pmatrix}
    1 \\
    0
  \end{pmatrix}
  + [0,1)
  \begin{pmatrix}
    0 \\
    \sqrt{2}
  \end{pmatrix}
  + v$ ($v \in \Lambda = \Z[\sqrt{-2}]$)\\
  %picture
  \todo{add pic}
  We take $\phi(\cdot) = N(\cdot)$ the norm map, so $\phi(a+b\sqrt{-2}) = a^2 + 2 b^2$.
  So $\phi(z) \in \Z$, $\phi(z) \geq 0$, $\phi(0) = 0$.\\
  Now let $x,y \in \Z[\sqrt{-2}]$ and $y \neq 0$.
  Let $q \in \Z[\sqrt{-2}]$ be a closest lattice point to the complex number $\frac{x}{y}$.
  Then
  \[ \abs{ \frac{x}{y} - q} \leq \frac{\sqrt{3}}{2} \text{.} \]
  Put $r = x - qy$.
  Hence, 
  \begin{align*}
    \phi(r) &= \phi(x - qy) = \abs{x - qy}^2 \\
    &= \abs{y}^2 \abs{\frac{x}{y} - q}^2 \\
    &\leq \frac{3}{4} \abs{y}^2 = \frac{3}{4} \phi(y) \\
    &< \phi(y) \text{.}
  \end{align*}
  This shows that $\Z[\sqrt{-2}]$ is Euclidean.
  The same argument applies for $\Z[\sqrt{-1}]$.
\end{proof}

The argument fails already for $\Z[\sqrt{-3}]$ as $\frac{\sqrt{1 + 3}}{2} \nless 1$.
And indeed $\Z[\sqrt{-3}]$ is not Euclidean.

\subsection{Integrality}

Let $A$ be a subring of $B$.
We say $b \in B$ is \emph{integral} over $A$ if $b$ is the root of a \emph{monic} polynomial with coefficients in $A$.
Clearly every $a \in A$ is integral over $A$.
We say $B$ is integral over $A$ if every $b \in B$ is integral over $A$.\\
Note that $x = \frac{r}{s} \in \Q$ with $\gcd(r,s) = 1$ is integral over $\Z$ if and only if $x \in \Z$. \\
Why?
Indeed, 
\[ \left( \frac{r}{s} \right)^n + a_1 \left( \frac{r}{s} \right)^{n-1} + \dots + a_{n-1} \left( \frac{r}{s} \right) + a_n = 0 \; (a_i \in \Z)\]
then 
\[ r^n + s a_1 r^{n-1} + \dots + s^{n-1} a_{n-1} r + s^n a_n = 0\]
Hence, $s \divides r^n$ and thus $s = \pm 1$.
So $x \in \Z$.
\\

Let $A_B = \{ b \in B : b \text{ is integral over } A\}$.
We call this the \emph{integral closure} of A in B.

We will show that $A_B$ is a ring.
In particular, if $x,y \in B$ are integral over $A$ then so are $x \cdot y$ and $x + y$.
\\

Recall that an $A$-module $M$ is a generalisation of the concept of a vector space over a field, where the field is replaced by a ring $A$.
We say that $M$ is finitely generated as an $A$-module if there exist $m_1,\dots,m_r \in M$ such that every $m \in M$ can be written as 
\[ m = a_1 m_1 + \dots + a_r m_r \]
where $a_1,\dots,a_r \in A$.
We say that $m_1,\dots,m_r$ generate $M$ as an $A$-module.


\begin{lemma}\label{l_3_3_1}
  Let $A \subset B$ be rings and let $M$ be a $B$-module.
  Suppose that $M$ is finitely generated as a $B$-module and that $B$ is finitely generated as an $A$-module.
  Then $M$ is finitely generated as an $A$-module.
\end{lemma}

\begin{proof}
  Let $x_1,\dots,x_m$, and $y_1,\dots,y_n$ be generators for $M$ as a $B$-module and $B$ as an $A$-module respectively.
  Then $x_i y_j$ ($1 \leq i \leq m$, $1 \leq j \leq n$) are generators for $M$ as an $A$-module. \\
  Why?
  Let $x \in M$ and write 
  \[ x = \sum_{i=1}^m b_i x_i \] 
  with $b_i \in B$.
  Moreover, for each $i$ we can find $a_{ij} \in A$ such that
  \[ b_i = \sum_{j=1}^n a_{ij} y_j \text{.} \]
  Thus
  \[ x = \sum_i \left( \sum_j a_{ij} y_j \right) \cdot x_i = \sum_{i,j} a_{ij}x_i y_j\]
\end{proof}

\end{document}